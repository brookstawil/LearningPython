

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>7. Iteration &mdash; How to Think Like a Computer Scientist: Learning with Python 3</title>
    
    <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '3rd Edition',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="How to Think Like a Computer Scientist: Learning with Python 3" href="index.html" />
    <link rel="next" title="8. Strings" href="strings.html" />
    <link rel="prev" title="6. Fruitful functions" href="fruitful_functions.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="strings.html" title="8. Strings"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="fruitful_functions.html" title="6. Fruitful functions"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">How to Think Like a Computer Scientist: Learning with Python 3</a> &raquo;</li> 
      </ul>
    </div>

    <div class="document">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="iteration">
<h1>7. Iteration<a class="headerlink" href="#iteration" title="Permalink to this headline">¶</a></h1>
<span class="target" id="index-0"></span><p id="index-1">Computers are often used to automate repetitive tasks. Repeating identical or
similar tasks without making errors is something that computers do well and
people do poorly.</p>
<p>Repeated execution of a set of statements is called <strong>iteration</strong>.  Because
iteration is so common, Python provides several language features to make it
easier. We&#8217;ve already seen the <tt class="docutils literal"><span class="pre">for</span></tt> statement in chapter 3.  This the
the form of iteration you&#8217;ll likely be using most often.  But in this chapter
we&#8217;ve going to look at the <tt class="docutils literal"><span class="pre">while</span></tt> statement &#8212; another way to have your
program do iteration, useful in slightly different circumstances.</p>
<p>Before we do that, let&#8217;s just review a few ideas...</p>
<div class="section" id="assignment">
<h2>7.1. Assignment<a class="headerlink" href="#assignment" title="Permalink to this headline">¶</a></h2>
<p>As we have mentioned previously, it is legal to make more than one assignment to the
same variable. A new assignment makes an existing variable refer to a new value
(and stop referring to the old value).</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">airtime_remaining</span> <span class="o">=</span> <span class="mi">15</span>
<span class="nb">print</span><span class="p">(</span><span class="n">airtime_remaining</span><span class="p">)</span>
<span class="n">airtime_remaining</span> <span class="o">=</span> <span class="mi">7</span>
<span class="nb">print</span><span class="p">(</span><span class="n">airtime_remaining</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>The output of this program is:</p>
<blockquote>
<div><div class="highlight-pycon"><div class="highlight"><pre><span class="go">15</span>
<span class="go">7</span>
</pre></div>
</div>
</div></blockquote>
<p>because the first time <tt class="docutils literal"><span class="pre">airtime_remaining</span></tt> is
printed, its value is 15, and the second time, its value is 7.</p>
<p>It is especially important to distinguish between an
assignment statement and a Boolean expression that tests for equality.
Because Python uses the equal token (<tt class="docutils literal"><span class="pre">=</span></tt>) for assignment,
it is tempting to interpret a statement like
<tt class="docutils literal"><span class="pre">a</span> <span class="pre">=</span> <span class="pre">b</span></tt> as a Boolean test.  Unlike mathematics, it is not!  Remember that the Python token
for the equality operator is <tt class="docutils literal"><span class="pre">==</span></tt>.</p>
<p>Note too that an equality test is symmetric, but assignment is not. For example,
if <tt class="docutils literal"><span class="pre">a</span> <span class="pre">==</span> <span class="pre">7</span></tt> then <tt class="docutils literal"><span class="pre">7</span> <span class="pre">==</span> <span class="pre">a</span></tt>. But in Python, the statement <tt class="docutils literal"><span class="pre">a</span> <span class="pre">=</span> <span class="pre">7</span></tt>
is legal and <tt class="docutils literal"><span class="pre">7</span> <span class="pre">=</span> <span class="pre">a</span></tt> is not.</p>
<p>In Python, an assignment statement can make
two variables equal, but because further assignments can change either of them,
they don&#8217;t have to stay that way:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">a</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span>    <span class="c"># After executing this line, a and b are now equal</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">3</span>    <span class="c"># After executing this line, a and b are no longer equal</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>The third line changes the value of <tt class="docutils literal"><span class="pre">a</span></tt> but does not change the value of
<tt class="docutils literal"><span class="pre">b</span></tt>, so they are no longer equal. (In some programming languages, a different
symbol is used for assignment, such as <tt class="docutils literal"><span class="pre">&lt;-</span></tt> or <tt class="docutils literal"><span class="pre">:=</span></tt>, to avoid confusion.  Some
people also think that <em>variable</em> was an unfortunae word to choose, and instead
we should have called them <em>assignables</em>.  Python chooses to
follow common terminology and token usage, also found in languages like C, C++, Java, and C#,
so we use the tokens <tt class="docutils literal"><span class="pre">=</span></tt> for assignment, <tt class="docutils literal"><span class="pre">==</span></tt> for equality, and we talk of <em>variables</em>.</p>
</div>
<div class="section" id="updating-variables">
<h2>7.2. Updating variables<a class="headerlink" href="#updating-variables" title="Permalink to this headline">¶</a></h2>
<p>When an assignment statement is executed, the right-hand side expression (i.e. the
expression that comes after the assignment token) is evaluated first.  This produces a value.
Then the assignment is made, so that the variable on the left-hand side now refers
to the new value.</p>
<p>One of the most common forms of assignment is an update, where the new
value of the variable depends on its old value.   Deduct 40 cents from
my airtime balance, or add one run to the scoreboard.</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">n</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>Line 2 means <cite>get the current value of n, multiply it by three and add
one, and assign the answer to n, thus making n refer to the value</cite>.
So after executing the two lines above, <tt class="docutils literal"><span class="pre">n</span></tt> will point/refer to the
integer 16.</p>
<p>If you try to get the value of a variable that has never been assigned to, you&#8217;ll get an error:</p>
<blockquote>
<div><div class="highlight-python3"><pre>&gt;&gt;&gt; w = x + 1
Traceback (most recent call last):
  File &quot;&lt;interactive input&gt;&quot;, line 1, in
NameError: name &#x27;x&#x27; is not defined</pre>
</div>
</div></blockquote>
<p>Before you can update a variable, you have to <strong>initialize</strong> it to some starting value,
usually with a simple assignment:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">runs_scored</span> <span class="o">=</span> <span class="mi">0</span>
<span class="o">...</span>
<span class="n">runs_scored</span> <span class="o">=</span> <span class="n">runs_scored</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>Line 3 &#8212; updating a variable by adding 1 to it &#8212; is very common.
It is called an <strong>increment</strong> of the variable; subtracting 1 is called a <strong>decrement</strong>.
Sometimes programmers also talk about <em>bumping</em> a variable, which means the same
as incrementing it by 1.</p>
</div>
<div class="section" id="the-for-loop-revisited">
<span id="index-2"></span><h2>7.3. The <tt class="docutils literal"><span class="pre">for</span></tt> loop revisited<a class="headerlink" href="#the-for-loop-revisited" title="Permalink to this headline">¶</a></h2>
<p>Recall that the <tt class="docutils literal"><span class="pre">for</span></tt> loop processes each item in a list.  Each item in
turn is (re-)assigned to the loop variable, and the body of the loop is executed.
We saw this example in an earlier chapter:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&quot;Joe&quot;</span><span class="p">,</span> <span class="s">&quot;Zoe&quot;</span><span class="p">,</span> <span class="s">&quot;Brad&quot;</span><span class="p">,</span> <span class="s">&quot;Angelina&quot;</span><span class="p">,</span> <span class="s">&quot;Zuki&quot;</span><span class="p">,</span> <span class="s">&quot;Thandi&quot;</span><span class="p">,</span> <span class="s">&quot;Paris&quot;</span><span class="p">]:</span>
    <span class="n">invitation</span> <span class="o">=</span> <span class="s">&quot;Hi &quot;</span> <span class="o">+</span> <span class="n">f</span> <span class="o">+</span> <span class="s">&quot;.  Please come to my party on Saturday!&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">invitation</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>Running through all the items in a list is called <strong>traversing</strong> the list,
or <strong>traversal</strong>.</p>
<p>Let us write a function now to sum up all the elements in a list of numbers.
Do this by hand first, and try to isolate exactly what steps you take.  You&#8217;ll
find you need to keep some &#8220;running total&#8221; of the sum so far, either on a piece
of paper, in your head, or in your calculator. Remembering things from one step to the next is
precisely why we have variables in a program: so we&#8217;ll need some variable
to remember the &#8220;running total&#8221;.  It should be initialized with a value of zero,
and then we need to traverse the items in the list.  For each item, we&#8217;ll want
to update the running total by adding the next number to it.</p>
<blockquote>
<div><div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">mysum</span><span class="p">(</span><span class="n">xs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Sum all the numbers in the list xs, and return the total. &quot;&quot;&quot;</span>
    <span class="n">running_total</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xs</span><span class="p">:</span>
        <span class="n">running_total</span> <span class="o">=</span> <span class="n">running_total</span> <span class="o">+</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">running_total</span>

<span class="c"># Add tests like these to your test suite ...</span>
<span class="n">test</span><span class="p">(</span><span class="n">mysum</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]),</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">test</span><span class="p">(</span><span class="n">mysum</span><span class="p">([</span><span class="mf">1.25</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mf">1.75</span><span class="p">]),</span> <span class="mf">5.5</span><span class="p">)</span>
<span class="n">test</span><span class="p">(</span><span class="n">mysum</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">test</span><span class="p">(</span><span class="n">mysum</span><span class="p">([</span> <span class="p">]),</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">test</span><span class="p">(</span><span class="n">mysum</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">)),</span> <span class="mi">55</span><span class="p">)</span>  <span class="c"># 11 is not included in the list.</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
</div>
<div class="section" id="the-while-statement">
<span id="index-3"></span><h2>7.4. The <tt class="docutils literal"><span class="pre">while</span></tt> statement<a class="headerlink" href="#the-while-statement" title="Permalink to this headline">¶</a></h2>
<p>Here is a fragment of code that demonstrates the use of the <tt class="docutils literal"><span class="pre">while</span></tt> statement:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">sum_to</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Return the sum of 1+2+3 ... n &quot;&quot;&quot;</span>
    <span class="n">ss</span>  <span class="o">=</span> <span class="mi">0</span>
    <span class="n">v</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">v</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">:</span>
        <span class="n">ss</span> <span class="o">=</span> <span class="n">ss</span> <span class="o">+</span> <span class="n">v</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">v</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">ss</span>

<span class="c"># For your test suite</span>
<span class="n">test</span><span class="p">(</span><span class="n">sum_to</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">test</span><span class="p">(</span><span class="n">sum_to</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="mi">500500</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>You can almost read the <tt class="docutils literal"><span class="pre">while</span></tt> statement as if it were English. It means,
while <tt class="docutils literal"><span class="pre">v</span></tt> is less than or equal to <tt class="docutils literal"><span class="pre">n</span></tt>, continue executing the body of the loop. Within
the body, each time, increment <tt class="docutils literal"><span class="pre">v</span></tt>. When <tt class="docutils literal"><span class="pre">v</span></tt> passes <tt class="docutils literal"><span class="pre">n</span></tt>, return your accumulated sum.</p>
<p>More formally, here is precise flow of execution for a <tt class="docutils literal"><span class="pre">while</span></tt> statement:</p>
<p>. Evaluate the condition at line 5, yielding a value which is either <tt class="docutils literal"><span class="pre">False</span></tt> or <tt class="docutils literal"><span class="pre">True</span></tt>.
. If the value is <tt class="docutils literal"><span class="pre">False</span></tt>, exit the <tt class="docutils literal"><span class="pre">while</span></tt> statement and continue</p>
<blockquote>
<div>execution at the next statement (line 8 in this case).</div></blockquote>
<dl class="docutils">
<dt>. If the value is <tt class="docutils literal"><span class="pre">True</span></tt>, execute each of the statements in the body (lines 6 and 7) and</dt>
<dd>then go back to the <tt class="docutils literal"><span class="pre">while</span></tt> statement at line 5.</dd>
</dl>
<p>The body consists of all of the statements indented below the <tt class="docutils literal"><span class="pre">while</span></tt> keyword.</p>
<p>Notice that if the loop condition is <tt class="docutils literal"><span class="pre">False</span></tt> the first time we get
loop, the statements in the body of the loop are never executed.</p>
<p>The body of the loop should change the value of one or more variables so that
eventually the condition becomes false and the loop terminates. Otherwise the
loop will repeat forever, which is called an <strong>infinite loop</strong>. An endless
source of amusement for computer scientists is the observation that the
directions on shampoo, &#8220;lather, rinse, repeat&#8221;, are an infinite loop.</p>
<p>In the case here, we can prove that the loop terminates because we
know that the value of <tt class="docutils literal"><span class="pre">n</span></tt> is finite, and we can see that the value of <tt class="docutils literal"><span class="pre">v</span></tt>
increments each time through the loop, so eventually it will have to exceed <tt class="docutils literal"><span class="pre">n</span></tt>. In
other cases, it is not so easy, even impossible in some cases,
to tell if the loop will ever terminate.</p>
<p>What you will notice here is that the <tt class="docutils literal"><span class="pre">while</span></tt> loop is more work for
you &#8212; the programmer &#8212; than the equivalent <tt class="docutils literal"><span class="pre">for</span></tt> loop.  When using a <tt class="docutils literal"><span class="pre">while</span></tt>
loop one has to manage the loop variable yourself: give it an initial value, test
for completion, and then make sure you change something in the body so that the loop
terminates.  By comparison, here is an equivalent function that uses <tt class="docutils literal"><span class="pre">for</span></tt> instead:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">sum_to</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Return the sum of 1+2+3 ... n &quot;&quot;&quot;</span>
    <span class="n">ss</span>  <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">ss</span> <span class="o">=</span> <span class="n">ss</span> <span class="o">+</span> <span class="n">v</span>
    <span class="k">return</span> <span class="n">ss</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>Notice the slightly tricky call to the <tt class="docutils literal"><span class="pre">range</span></tt> function &#8212; we had to add one onto <tt class="docutils literal"><span class="pre">n</span></tt>,
because <tt class="docutils literal"><span class="pre">range</span></tt> generates its list up to but excluding the value you give it.
It would be easy to make a programming mistake and overlook this, but because we&#8217;ve
made the investment of writing some unit tests, our test suite would have caught our error.</p>
<p>So why have two kinds of loop if <tt class="docutils literal"><span class="pre">for</span></tt> looks easier?  This next example shows a case where
we need the extra power that we get from the <tt class="docutils literal"><span class="pre">while</span></tt> loop.</p>
</div>
<div class="section" id="the-collatz-3n-1-sequence">
<span id="index-4"></span><h2>7.5. The Collatz 3n + 1 sequence<a class="headerlink" href="#the-collatz-3n-1-sequence" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s look at a simple sequence that has fascinated and foxed mathematicians for many years.
They still cannot answer even quite simple questions about this.</p>
<p>The &#8220;computational rule&#8221; for creating the sequence is to start from
some given <tt class="docutils literal"><span class="pre">n</span></tt>, and to generate
the next term of the sequence from <tt class="docutils literal"><span class="pre">n</span></tt>, either by halving <tt class="docutils literal"><span class="pre">n</span></tt>,
(whenever <tt class="docutils literal"><span class="pre">n</span></tt> is even), or else by multiplying it by three and adding 1.  The sequence
terminates when <tt class="docutils literal"><span class="pre">n</span></tt> reaches 1.</p>
<p>This Python function captures that algorithm:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">seq3np1</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Print the 3n+1 sequence from n,</span>
<span class="sd">        terminating when it reaches 1.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">while</span> <span class="n">n</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">&quot;, &quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>        <span class="c"># n is even</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="k">else</span><span class="p">:</span>                 <span class="c"># n is odd</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">&quot;.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>Notice first that the print function on line 6 has an extra argument <tt class="docutils literal"><span class="pre">end=&quot;,</span> <span class="pre">&quot;</span></tt>.  This
tells the <tt class="docutils literal"><span class="pre">print</span></tt> function to follow the printed string with whatever the programmer
chooses (in this case, a comma followed by a space), instead of ending the line. So
each time something is printed in the loop, it is printed on the same output line, with
the numbers separated by commas.  The call to <tt class="docutils literal"><span class="pre">print(n,</span> <span class="pre">end=&quot;.\n&quot;)</span></tt> at line 11 after the loop terminates
will then print the final value of <tt class="docutils literal"><span class="pre">n</span></tt> followed by a period and a newline character.
(You&#8217;ll cover the <tt class="docutils literal"><span class="pre">\n</span></tt> (newline character) in the next chapter).</p>
<p>The condition for continuing with this loop is <tt class="docutils literal"><span class="pre">n</span> <span class="pre">!=</span> <span class="pre">1</span></tt>, so the loop will continue running until
it reaches its termination condition, (i.e. <tt class="docutils literal"><span class="pre">n</span> <span class="pre">==</span> <span class="pre">1</span></tt>).</p>
<p>Each time through the loop, the program outputs the value of <tt class="docutils literal"><span class="pre">n</span></tt> and then
checks whether it is even or odd. If it is even, the value of <tt class="docutils literal"><span class="pre">n</span></tt> is divided
by 2 using integer division. If it is odd, the value is replaced by <tt class="docutils literal"><span class="pre">n</span> <span class="pre">*</span> <span class="pre">3</span> <span class="pre">+</span> <span class="pre">1</span></tt>.
Here are some examples:</p>
<blockquote>
<div><div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">seq3np1</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">3, 10, 5, 16, 8, 4, 2, 1.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">seq3np1</span><span class="p">(</span><span class="mi">19</span><span class="p">)</span>
<span class="go">19, 58, 29, 88, 44, 22, 11, 34, 17, 52, 26, 13,</span>
<span class="go">                    40, 20, 10, 5, 16, 8, 4, 2, 1.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">seq3np1</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span>
<span class="go">21, 64, 32, 16, 8, 4, 2, 1.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">seq3np1</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
<span class="go">16, 8, 4, 2, 1.</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div></blockquote>
<p>Since <tt class="docutils literal"><span class="pre">n</span></tt> sometimes increases and sometimes decreases, there is no obvious
proof that <tt class="docutils literal"><span class="pre">n</span></tt> will ever reach 1, or that the program terminates. For some
particular values of <tt class="docutils literal"><span class="pre">n</span></tt>, we can prove termination. For example, if the
starting value is a power of two, then the value of <tt class="docutils literal"><span class="pre">n</span></tt> will be even each
time through the loop until it reaches 1. The previous example ends with such a
sequence, starting with 16.</p>
<p>See if you can find a small starting
number that needs more than a hundred steps before it terminates.</p>
<p>Particular values aside, the interesting question was first posed by a German
mathematician called Lothar Collatz: the <em>Collatz conjecture</em> (also known as
the <em>3n + 1 conjecture</em>), is that this sequence terminates for <em>all</em> positive
values of <tt class="docutils literal"><span class="pre">n</span></tt>.  So far, no one has been able to prove it <em>or</em> disprove it!
(A conjecture is a statement that might be true, but nobody knows for sure.)</p>
<p>Think carefully about what would be needed for a proof or disproof of the conjecture
<em>&#8220;All positive integers will eventually converge to 1 using the Collatz rules&#8221;</em>.
With fast computers we have been able to test every integer up to very
large values, and so far, they have all eventually ended up at 1.
But who knows? Perhaps there is some as-yet untested number which does not reduce to 1.</p>
<p>You&#8217;ll notice that if you don&#8217;t stop when you reach 1, the sequence gets into
its own cyclic loop:  1, 4, 2, 1, 4, 2, 1, 4 ...   So one possibility is that there might
be other cycles that we just haven&#8217;t found yet.</p>
<p>Wikipedia has an informative article about the Collatz conjecture. The sequence
also goes under other names (Hailstone sequence, Wonderous numbers, etc.),
and you&#8217;ll find out just how many integers have already been tested by computer,
and found to converge!</p>
<div class="admonition-choosing-between-for-and-while admonition">
<p class="first admonition-title">Choosing between <tt class="docutils literal"><span class="pre">for</span></tt> and <tt class="docutils literal"><span class="pre">while</span></tt></p>
<p>Use a <tt class="docutils literal"><span class="pre">for</span></tt> loop if you know, before you start looping,
the maximum number of times that you&#8217;ll need to execute the body.
For example, if you&#8217;re traversing a list of elements, you know that the maximum
number of loop iterations you can possibly need is &#8220;all the elements in the list&#8221;.
Or if you need to print the 12 times table, we know right away how many times
the loop will need to run.</p>
<p>So any problem like &#8220;iterate this weather model for 1000 cycles&#8221;, or &#8220;search this
list of words&#8221;, &#8220;find all prime numbers up to 10000&#8221; suggest that a <tt class="docutils literal"><span class="pre">for</span></tt> loop is best.</p>
<p>By contrast, if you are required to repeat some computation until some condition is
met, and you cannot calculate in advance when (of if) this will happen,
as we did in this 3n + 1 problem, you&#8217;ll need a <tt class="docutils literal"><span class="pre">while</span></tt> loop.</p>
<p class="last">We call the first case <strong>definite iteration</strong> &#8212; we know ahead of time some definite bounds for
what is needed.  The latter case is called <strong>indefinite iteration</strong> &#8212; we&#8217;re not sure
how many iterations we&#8217;ll need &#8212; we cannot even establish an upper bound!</p>
</div>
</div>
<div class="section" id="tracing-a-program">
<span id="index-5"></span><h2>7.6. Tracing a program<a class="headerlink" href="#tracing-a-program" title="Permalink to this headline">¶</a></h2>
<p>To write effective computer programs, and to build a good conceptual
model of program execution, a programmer needs to develop the ability
to <strong>trace</strong> the execution of a computer program. Tracing involves becoming the
computer and following the flow of execution through a sample program run,
recording the state of all variables and any output the program generates after
each instruction is executed.</p>
<p>To understand this process, let&#8217;s trace the call to <tt class="docutils literal"><span class="pre">seq3np1(3)</span></tt> from the
previous section. At the start of the trace, we have a variable, <tt class="docutils literal"><span class="pre">n</span></tt>
(the parameter), with an initial value of 3. Since 3 is not equal to 1, the
<tt class="docutils literal"><span class="pre">while</span></tt> loop body is executed. 3 is printed and <tt class="docutils literal"><span class="pre">3</span> <span class="pre">%</span> <span class="pre">2</span> <span class="pre">==</span> <span class="pre">0</span></tt> is evaluated.
Since it evaluates to <tt class="docutils literal"><span class="pre">False</span></tt>, the <tt class="docutils literal"><span class="pre">else</span></tt> branch is executed and
<tt class="docutils literal"><span class="pre">3</span> <span class="pre">*</span> <span class="pre">3</span> <span class="pre">+</span> <span class="pre">1</span></tt> is evaluated and assigned to <tt class="docutils literal"><span class="pre">n</span></tt>.</p>
<p>To keep track of all this as you hand trace a program, make a column heading on
a piece of paper for each variable created as the program runs and another one
for output. Our trace so far would look something like this:</p>
<blockquote>
<div><div class="highlight-pycon"><div class="highlight"><pre><span class="go">n               output printed so far</span>
<span class="go">--              ---------------------</span>
<span class="go">3               3,</span>
<span class="go">10</span>
</pre></div>
</div>
</div></blockquote>
<p>Since <tt class="docutils literal"><span class="pre">10</span> <span class="pre">!=</span> <span class="pre">1</span></tt> evaluates to <tt class="docutils literal"><span class="pre">True</span></tt>, the loop body is again executed,
and 10 is printed. <tt class="docutils literal"><span class="pre">10</span> <span class="pre">%</span> <span class="pre">2</span> <span class="pre">==</span> <span class="pre">0</span></tt> is true, so the <tt class="docutils literal"><span class="pre">if</span></tt> branch is
executed and <tt class="docutils literal"><span class="pre">n</span></tt> becomes 5. By the end of the trace we have:</p>
<blockquote>
<div><div class="highlight-pycon"><div class="highlight"><pre><span class="go">n               output printed so far</span>
<span class="go">--              ---------------------</span>
<span class="go">3               3,</span>
<span class="go">10              3, 10,</span>
<span class="go">5               3, 10, 5,</span>
<span class="go">16              3, 10, 5, 16,</span>
<span class="go">8               3, 10, 5, 16, 8,</span>
<span class="go">4               3, 10, 5, 16, 8, 4,</span>
<span class="go">2               3, 10, 5, 16, 8, 4, 2,</span>
<span class="go">1               3, 10, 5, 16, 8, 4, 2, 1.</span>
</pre></div>
</div>
</div></blockquote>
<p>Tracing can be a bit tedious and error prone (that&#8217;s why we get computers to do
this stuff in the first place!), but it is an essential skill for a programmer
to have. From this trace we can learn a lot about the way our code works. We
can observe that as soon as <tt class="docutils literal"><span class="pre">n</span></tt> becomes a power of 2, for example, the program
will require log<sub>2</sub>(n) executions of the loop body to complete. We can
also see that the final 1 will not be printed as output within the body of the loop,
which is why we put the special <tt class="docutils literal"><span class="pre">print</span></tt> function at the end.</p>
<p>Tracing a program is, of course, related to single-stepping through your code
and being able to inspect the variables. Using the computer to <strong>single-step</strong> for you is
less error prone and more convenient.
Also, as your programs get more complex, they might execute many millions of
steps before they get to the code that you&#8217;re really interested in, so manual tracing
becomes impossible.  Being able to set a <strong>breakpoint</strong> where you need
one is far more powerful. So we strongly encourage you to invest time in
learning using to use your programming environment (PyScripter, in these notes) to full
effect.</p>
<p>There are also some great visualization tools becoming available to help you
trace and understand small fragments of Python code.  The one we recommend is at
<a class="reference external" href="http://netserv.ict.ru.ac.za/python3_viz">http://netserv.ict.ru.ac.za/python3_viz</a></p>
<p>We&#8217;ve cautioned
against chatterbox functions, but used them here.  As we learn a bit more Python, we&#8217;ll
be able to show you how to generate a list of values to hold the sequence, rather than having
the function print them. Doing this would remove the need to have all these pesky <tt class="docutils literal"><span class="pre">print</span></tt> functions
in the middle of our logic, and will make the function more useful.</p>
</div>
<div class="section" id="counting-digits">
<span id="counting"></span><h2>7.7. Counting digits<a class="headerlink" href="#counting-digits" title="Permalink to this headline">¶</a></h2>
<p>The following function counts the number of decimal digits in a positive
integer:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">num_digits</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">n</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">//</span> <span class="mi">10</span>
    <span class="k">return</span> <span class="n">count</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>A call to <tt class="docutils literal"><span class="pre">print(num_digits(710))</span></tt> will print <tt class="docutils literal"><span class="pre">3</span></tt>. Trace the execution of this
function call (perhaps using the single step function in PyScripter, or the
Python visualizer, or on some paper) to convince yourself that it works.</p>
<p>This function demonstrates an important pattern of computation called a <strong>counter</strong>.
The variable <tt class="docutils literal"><span class="pre">count</span></tt> is initialized to 0 and then incremented each time the
loop body is executed. When the loop exits, <tt class="docutils literal"><span class="pre">count</span></tt> contains the result &#8212;
the total number of times the loop body was executed, which is the same as the
number of digits.</p>
<p>If we wanted to only count digits that are either 0 or 5, adding a conditional
before incrementing the counter will do the trick:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">num_zero_and_five_digits</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">digit</span> <span class="o">=</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">10</span>
        <span class="k">if</span> <span class="n">digit</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">digit</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">//</span> <span class="mi">10</span>
    <span class="k">return</span> <span class="n">count</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>Confirm that <tt class="docutils literal"><span class="pre">test(num_zero_and_five_digits(1055030250),</span> <span class="pre">7)</span></tt> passes.</p>
<p>Notice, however, that <tt class="docutils literal"><span class="pre">test(num_digits(0),</span> <span class="pre">1)</span></tt> fails.  Explain why.  Do you think this is a bug in
the code, or a bug in the specifications, or our expectations, or the tests?</p>
</div>
<div class="section" id="abbreviated-assignment">
<span id="index-6"></span><h2>7.8. Abbreviated assignment<a class="headerlink" href="#abbreviated-assignment" title="Permalink to this headline">¶</a></h2>
<p>Incrementing a variable is so common that Python provides an abbreviated syntax
for it:</p>
<blockquote>
<div><div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">count</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">count</span>
<span class="go">2</span>
</pre></div>
</div>
</div></blockquote>
<p><tt class="docutils literal"><span class="pre">count</span> <span class="pre">+=</span> <span class="pre">1</span></tt> is an abreviation for <tt class="docutils literal"><span class="pre">count</span> <span class="pre">=</span> <span class="pre">count</span> <span class="pre">+</span> <span class="pre">1</span></tt> . We pronounce the operator
as <em>&#8220;plus-equals&#8221;</em>.  The increment value does not have to be 1:</p>
<blockquote>
<div><div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">+=</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span>
<span class="go">7</span>
</pre></div>
</div>
</div></blockquote>
<p>There are similar abbreviations for <tt class="docutils literal"><span class="pre">-=</span></tt>, <tt class="docutils literal"><span class="pre">*=</span></tt>, <tt class="docutils literal"><span class="pre">/=</span></tt>, <tt class="docutils literal"><span class="pre">//=</span></tt> and <tt class="docutils literal"><span class="pre">%=</span></tt>:</p>
<blockquote>
<div><div class="highlight-python3"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">*=</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">-=</span> <span class="mi">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span>
<span class="go">6</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">//=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">%=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span>
<span class="go">1</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="help-and-meta-notation">
<span id="index-7"></span><h2>7.9. Help and meta-notation<a class="headerlink" href="#help-and-meta-notation" title="Permalink to this headline">¶</a></h2>
<p>Python comes with extensive documentation for all its built-in functions, and its libraries.
Different systems have different ways of accessing this help.  In PyScripter, click on the
<em>Help</em> menu item, and select <em>Python Manuals</em>.  Then search for help on the built-in function
<strong>range</strong>.   You&#8217;ll get something like this:</p>
<img alt="_images/help_range.png" src="_images/help_range.png" />
<p>Notice the square brackets in the description of the arguments.
These are examples of <strong>meta-notation</strong> &#8212; notation that describes
Python syntax, but is not part of it.
The square brackets in this documentation mean that the argument is
<em>optional</em> &#8212; the programmer can
omit it.  So what this first line of help tells us is that
<tt class="docutils literal"><span class="pre">range</span></tt> must always have a <tt class="docutils literal"><span class="pre">stop</span></tt> argument,
but it may have an optional <tt class="docutils literal"><span class="pre">start</span></tt> argument (which must be
followed by a comma if it is present),
and it can also have an optional <tt class="docutils literal"><span class="pre">step</span></tt> argument, preceded by
a comma if it is present.</p>
<p>The examples from help show that <tt class="docutils literal"><span class="pre">range</span></tt> can have either 1, 2 or 3 arguments.
The list can
start at any starting value, and go up or down in increments other than 1.
The documentation here also says that the arguments must be integers.</p>
<p>Other meta-notation you&#8217;ll frequently encounter is the use of bold
and italics.  The bold means that these are tokens
&#8212; keywords or symbols &#8212; typed into your Python code exactly as
they are, whereas the italic terms stand for &#8220;something of this type&#8221;.
So the syntax description</p>
<blockquote>
<div><strong>for</strong> <em>variable</em> <strong>in</strong> <em>list</em> <strong>:</strong></div></blockquote>
<p>means you can substitute any legal
variable and any legal list when you write your Python code.</p>
<p>This (simplified) description of the <tt class="docutils literal"><span class="pre">print</span></tt> function, shows another example
of meta-notation in which the ellipses (<tt class="docutils literal"><span class="pre">...</span></tt>) mean that you can have as many
objects as you like (even zero), separated by commas:</p>
<blockquote>
<div><strong>print( [</strong><em>object,</em> ... <strong>] )</strong></div></blockquote>
<p>Meta-notation gives us a concise and powerful way to describe the <em>pattern</em> of some syntax
or feature.</p>
</div>
<div class="section" id="tables">
<span id="index-8"></span><h2>7.10. Tables<a class="headerlink" href="#tables" title="Permalink to this headline">¶</a></h2>
<p>One of the things loops are good for is generating tables.  Before
computers were readily available, people had to calculate logarithms, sines and
cosines, and other mathematical functions by hand. To make that easier,
mathematics books contained long tables listing the values of these functions.
Creating the tables was slow and boring, and they tended to be full of errors.</p>
<p>When computers appeared on the scene, one of the initial reactions was, <em>&#8220;This is
great! We can use the computers to generate the tables, so there will be no
errors.&#8221;</em> That turned out to be true (mostly) but shortsighted. Soon thereafter,
computers and calculators were so pervasive that the tables became obsolete.</p>
<p>Well, almost. For some operations, computers use tables of values to get an
approximate answer and then perform computations to improve the approximation.
In some cases, there have been errors in the underlying tables, most famously
in the table the Intel Pentium processor chip used to perform floating-point division.</p>
<p>Although a log table is not as useful as it once was, it still makes a good
example of iteration. The following program outputs a sequence of values in the
left column and 2 raised to the power of that value in the right column:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">13</span><span class="p">):</span>   <span class="c"># Generate numbers 0 to 12</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="o">**</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>The string <tt class="docutils literal"><span class="pre">&quot;\t&quot;</span></tt> represents a <strong>tab character</strong>. The backslash character in
<tt class="docutils literal"><span class="pre">&quot;\t&quot;</span></tt> indicates the beginning of an <strong>escape sequence</strong>.  Escape sequences
are used to represent invisible characters like tabs and newlines. The sequence
<tt class="docutils literal"><span class="pre">\n</span></tt> represents a <strong>newline</strong>.</p>
<p>An escape sequence can appear anywhere in a string; in this example, the tab
escape sequence is the only thing in the string. How do you think you represent
a backslash in a string?</p>
<p>As characters and strings are displayed on the screen, an invisible marker
called the <strong>cursor</strong> keeps track of where the next character will go. After a
<tt class="docutils literal"><span class="pre">print</span></tt> function, the cursor normally goes to the beginning of the next
line.</p>
<p>The tab character shifts the cursor to the right until it reaches one of the
tab stops. Tabs are useful for making columns of text line up, as in the output
of the previous program:</p>
<blockquote>
<div><div class="highlight-pycon"><div class="highlight"><pre><span class="go">0       1</span>
<span class="go">1       2</span>
<span class="go">2       4</span>
<span class="go">3       8</span>
<span class="go">4       16</span>
<span class="go">5       32</span>
<span class="go">6       64</span>
<span class="go">7       128</span>
<span class="go">8       256</span>
<span class="go">9       512</span>
<span class="go">10      1024</span>
<span class="go">11      2048</span>
<span class="go">12      4096</span>
</pre></div>
</div>
</div></blockquote>
<p>Because of the tab characters between the columns, the position of the second
column does not depend on the number of digits in the first column.</p>
</div>
<div class="section" id="two-dimensional-tables">
<span id="index-9"></span><h2>7.11. Two-dimensional tables<a class="headerlink" href="#two-dimensional-tables" title="Permalink to this headline">¶</a></h2>
<p>A two-dimensional table is a table where you read the value at the intersection
of a row and a column. A multiplication table is a good example. Let&#8217;s say you
want to print a multiplication table for the values from 1 to 6.</p>
<p>A good way to start is to write a loop that prints the multiples of 2, all on
one line:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">i</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">&quot;   &quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>Here we&#8217;ve used the <tt class="docutils literal"><span class="pre">range</span></tt> function, but made it start its sequence at 1.
As the loop executes, the value of <tt class="docutils literal"><span class="pre">i</span></tt> changes from 1 to
6. When all the elements of the range have been assigned to <tt class="docutils literal"><span class="pre">i</span></tt>, the loop terminates.
Each time through the loop, it
displays the value of <tt class="docutils literal"><span class="pre">2</span> <span class="pre">*</span> <span class="pre">i</span></tt>, followed by three spaces.</p>
<p>Again, the extra <tt class="docutils literal"><span class="pre">end=&quot;</span>&nbsp;&nbsp; <span class="pre">&quot;</span></tt> argument in the <tt class="docutils literal"><span class="pre">print</span></tt> function suppresses the newline, and
uses three spaces instead.  After the
loop completes, the call to <tt class="docutils literal"><span class="pre">print</span></tt> at line 3 finishes the current line, and starts a new line.</p>
<p>The output of the program is:</p>
<blockquote>
<div><div class="highlight-pycon"><div class="highlight"><pre><span class="go">2      4      6      8      10     12</span>
</pre></div>
</div>
</div></blockquote>
<p>So far, so good. The next step is to <strong>encapsulate</strong> and <strong>generalize</strong>.</p>
</div>
<div class="section" id="encapsulation-and-generalization">
<span id="index-10"></span><h2>7.12. Encapsulation and generalization<a class="headerlink" href="#encapsulation-and-generalization" title="Permalink to this headline">¶</a></h2>
<p>Encapsulation is the process of wrapping a piece of code in a function,
allowing you to take advantage of all the things functions are good for. You
have already seen some examples of encapsulation, including <tt class="docutils literal"><span class="pre">is_divisible</span></tt> in a previous chapter.</p>
<p>Generalization means taking something specific, such as printing the multiples
of 2, and making it more general, such as printing the multiples of any
integer.</p>
<p>This function encapsulates the previous loop and generalizes it to print
multiples of <tt class="docutils literal"><span class="pre">n</span></tt>:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">print_multiples</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">n</span> <span class="o">*</span> <span class="n">i</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">&quot;   &quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>To encapsulate, all we had to do was add the first line, which declares the
name of the function and the parameter list. To generalize, all we had to do
was replace the value 2 with the parameter <tt class="docutils literal"><span class="pre">n</span></tt>.</p>
<p>If we call this function with the argument 2, we get the same output as before.
With the argument 3, the output is:</p>
<blockquote>
<div><div class="highlight-pycon"><div class="highlight"><pre><span class="go">3      6      9      12     15     18</span>
</pre></div>
</div>
</div></blockquote>
<p>With the argument 4, the output is:</p>
<blockquote>
<div><div class="highlight-pycon"><div class="highlight"><pre><span class="go">4      8      12     16     20     24</span>
</pre></div>
</div>
</div></blockquote>
<p>By now you can probably guess how to print a multiplication table &#8212; by
calling <tt class="docutils literal"><span class="pre">print_multiples</span></tt> repeatedly with different arguments. In fact, we
can use another loop:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">):</span>
    <span class="n">print_multiples</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>Notice how similar this loop is to the one inside <tt class="docutils literal"><span class="pre">print_multiples</span></tt>.  All we
did was replace the <tt class="docutils literal"><span class="pre">print</span></tt> function with a function call.</p>
<p>The output of this program is a multiplication table:</p>
<blockquote>
<div><div class="highlight-pycon"><div class="highlight"><pre><span class="go">1      2      3      4      5      6</span>
<span class="go">2      4      6      8      10     12</span>
<span class="go">3      6      9      12     15     18</span>
<span class="go">4      8      12     16     20     24</span>
<span class="go">5      10     15     20     25     30</span>
<span class="go">6      12     18     24     30     36</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="more-encapsulation">
<span id="index-11"></span><h2>7.13. More encapsulation<a class="headerlink" href="#more-encapsulation" title="Permalink to this headline">¶</a></h2>
<p>To demonstrate encapsulation again, let&#8217;s take the code from the last section
and wrap it up in a function:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">print_mult_table</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">):</span>
        <span class="n">print_multiples</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>This process is a common <strong>development plan</strong>. We develop code by writing lines
of code outside any function, or typing them in to the interpreter. When we get
the code working, we extract it and wrap it up in a function.</p>
<p>This development plan is particularly useful if you don&#8217;t know how to divide
the program into functions when you start writing. This approach lets you
design as you go along.</p>
</div>
<div class="section" id="local-variables">
<span id="index-12"></span><h2>7.14. Local variables<a class="headerlink" href="#local-variables" title="Permalink to this headline">¶</a></h2>
<p>You might be wondering how we can use the same variable, <tt class="docutils literal"><span class="pre">i</span></tt>, in both
<tt class="docutils literal"><span class="pre">print_multiples</span></tt> and <tt class="docutils literal"><span class="pre">print_mult_table</span></tt>. Doesn&#8217;t it cause problems when
one of the functions changes the value of the variable?</p>
<p>The answer is no, because the <tt class="docutils literal"><span class="pre">i</span></tt> in <tt class="docutils literal"><span class="pre">print_multiples</span></tt> and the <tt class="docutils literal"><span class="pre">i</span></tt> in
<tt class="docutils literal"><span class="pre">print_mult_table</span></tt> are <em>not</em> the same variable.</p>
<p>Variables created inside a function definition are local; you can&#8217;t access a
local variable from outside its home function. That means you are free to have
multiple variables with the same name as long as they are not in the same
function.</p>
<p>Python examines all the statements in a function &#8212; if any of them assign a value
to a variable, that is the clue that Python uses to make the variable a local variable.</p>
<p>The stack diagram for this program shows that the two variables named <tt class="docutils literal"><span class="pre">i</span></tt> are
not the same variable. They can refer to different values, and changing one
does not affect the other.</p>
<blockquote>
<div><img alt="Stack 2 diagram" src="_images/stack2.png" />
</div></blockquote>
<p>The value of <tt class="docutils literal"><span class="pre">i</span></tt> in <tt class="docutils literal"><span class="pre">print_mult_table</span></tt> goes from 1 to 6. In the diagram it
happens to be 3. The next time through the loop it will be 4. Each time through
the loop, <tt class="docutils literal"><span class="pre">print_mult_table</span></tt> calls <tt class="docutils literal"><span class="pre">print_multiples</span></tt> with the current value
of <tt class="docutils literal"><span class="pre">i</span></tt> as an argument. That value gets assigned to the parameter <tt class="docutils literal"><span class="pre">n</span></tt>.</p>
<p>Inside <tt class="docutils literal"><span class="pre">print_multiples</span></tt>, the value of <tt class="docutils literal"><span class="pre">i</span></tt> goes from 1 to 6. In the
diagram, it happens to be 2. Changing this variable has no effect on the value
of <tt class="docutils literal"><span class="pre">i</span></tt> in <tt class="docutils literal"><span class="pre">print_mult_table</span></tt>.</p>
<p>It is common and perfectly legal to have different local variables with the
same name. In particular, names like <tt class="docutils literal"><span class="pre">i</span></tt> and <tt class="docutils literal"><span class="pre">j</span></tt> are used frequently as
loop variables. If you avoid using them in one function just because you used
them somewhere else, you will probably make the program harder to read.</p>
<p>The visualizer at <a class="reference external" href="http://netserv.ict.ru.ac.za/python3_viz/">http://netserv.ict.ru.ac.za/python3_viz/</a> shows very clearly how the
two variables <tt class="docutils literal"><span class="pre">i</span></tt> are distinct variables, and how they have independent values.</p>
</div>
<div class="section" id="the-break-statement">
<span id="index-13"></span><h2>7.15. The <tt class="docutils literal"><span class="pre">break</span></tt> statement<a class="headerlink" href="#the-break-statement" title="Permalink to this headline">¶</a></h2>
<p>The <strong>break</strong> statement is used to immediately leave the body of its loop.  The next
statement to be executed is the first one after the body:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">29</span><span class="p">]:</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c"># If the number is odd</span>
       <span class="k">break</span>        <span class="c">#  ... immediately exit the loop</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s">&quot;done&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>This prints:</p>
<blockquote>
<div><div class="highlight-pycon"><div class="highlight"><pre><span class="go">12</span>
<span class="go">16</span>
<span class="go">done</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition-the-pre-test-loop-standard-loop-behaviour admonition">
<p class="first admonition-title">The pre-test loop &#8212; standard loop behaviour</p>
<p><tt class="docutils literal"><span class="pre">for</span></tt> and <tt class="docutils literal"><span class="pre">while</span></tt> loops do their tests at the start, before executing
any part of the body.   They&#8217;re called <strong>pre-test</strong> loops, because the test
happens before (pre) the body.
<tt class="docutils literal"><span class="pre">break</span></tt> and <tt class="docutils literal"><span class="pre">return</span></tt> are our tools for adapting this standard behaviour.</p>
<img alt="_images/pre_test_loop.png" class="last" src="_images/pre_test_loop.png" />
</div>
</div>
<div class="section" id="other-flavours-of-loops">
<h2>7.16. Other flavours of loops<a class="headerlink" href="#other-flavours-of-loops" title="Permalink to this headline">¶</a></h2>
<p>Sometimes we&#8217;d like to have the <strong>middle-test</strong> loop with the exit test in the middle
of the body, rather than at the beginning or at the end.  Or a <strong>post-test</strong> loop that
puts its exit test as the last thing in the body. Other languages have different
syntax and keywords for these different flavours, but Python just uses
a combination of <tt class="docutils literal"><span class="pre">while</span></tt> and <tt class="docutils literal"><span class="pre">if</span> <span class="pre">condition:</span> <span class="pre">break</span></tt> to get the job done.</p>
<p>A typical example is a problem where the user has to input numbers to be summed.
To indicate that there are no more inputs, the user enters a special value, often
the value -1, or the empty string.  This needs a middle-exit loop pattern:
input the next number, then test whether to exit, or else process the number:</p>
<blockquote>
<div><div class="admonition-the-middle-test-loop-flowchart admonition">
<p class="first admonition-title">The middle-test loop flowchart</p>
<img alt="_images/mid_test_loop.png" class="last" src="_images/mid_test_loop.png" />
</div>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="k">True</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">&quot;Enter the next number. (Leave blank to end)&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">response</span> <span class="o">==</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="n">total</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s">&quot;The total of the numbers you entered is &quot;</span><span class="p">,</span> <span class="n">total</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>Convince yourself that this fits the middle-exit loop flowchart: line 3
does some useful work, lines 4 and 5 can exit the loop, and if they don&#8217;t
line 6 does more useful work before the next iteration starts.</p>
<p>The <tt class="docutils literal"><span class="pre">while</span> <span class="pre">bool-expr:</span></tt> uses the Boolean expression to determine whether to iterate again.
<tt class="docutils literal"><span class="pre">True</span></tt> is a trivial Boolean expression, so <tt class="docutils literal"><span class="pre">while</span> <span class="pre">True:</span></tt>  means <em>always do
the loop body again</em>.  This is a language <em>idiom</em> &#8212; a convention that
most programmers will recognize immediately. Since the expression on line 2
will never terminate the loop, (it is a dummy test) the programmer must arrange to
break (or return) out of the loop body elsewhere, in some other way (i.e. in lines 4 and 5 in
this sample). A clever compiler or interpreter will understand that line 2 is a
fake test that must always succeed, so it won&#8217;t even generate a test, and our flowchart
never even put the diamond-shape dummy test box at the top of the loop!</p>
<p>Similarly, by just moving the <tt class="docutils literal"><span class="pre">if</span> <span class="pre">condition:</span> <span class="pre">break</span></tt> to the end of the loop body we
create a pattern for a post-test loop.  Post-test loops are used when you want to
be sure that the loop body always executes at least once (because the first test
only happens at the end of the execution of the first loop body).
This is useful, for example, if we want to play an interactive game against
the user &#8212; we always want to play at least one game:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">while</span> <span class="k">True</span><span class="p">:</span>
    <span class="n">play_the_game_once</span><span class="p">()</span>
    <span class="n">response</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">&quot;Play again? (yes or no)&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">response</span> <span class="o">!=</span> <span class="s">&quot;yes&quot;</span><span class="p">:</span>
        <span class="k">break</span>
<span class="nb">print</span><span class="p">(</span><span class="s">&quot;Goodbye!&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<div class="admonition-hint-think-about-where-you-want-the-exit-test-to-happen admonition">
<p class="first admonition-title">Hint: Think about where you want the exit test to happen</p>
<p class="last">Once you&#8217;ve recognized that you need a loop to repeat something, think
about its terminating condition &#8212; when will I want to stop iterating?
Then figure out whether you need to do the test before starting
the first (and every other) iteration, or at the end of
the first (and every other) iteration, or perhaps in
the middle of each iteration.  Interactive programs that require input
from the user or read from files often need to exit their loops in the
middle or at the end of an iteration, when it becomes clear that there is
no more data to process, or the user doesn&#8217;t want to play our game anymore.</p>
</div>
</div>
<div class="section" id="an-example">
<h2>7.17. An example<a class="headerlink" href="#an-example" title="Permalink to this headline">¶</a></h2>
<p>The following program implements a simple guessing game:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">random</span>                   <span class="c"># We cover random numbers in the</span>
<span class="n">rng</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">Random</span><span class="p">()</span>           <span class="c">#  modules chapter, so peek ahead.</span>
<span class="n">number</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span> <span class="c"># Get random number between [1 and 1000).</span>

<span class="n">guesses</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>

<span class="k">while</span> <span class="k">True</span><span class="p">:</span>
    <span class="n">guess</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="n">msg</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Guess my number between 1 and 1000: &quot;</span><span class="p">))</span>
    <span class="n">guesses</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">guess</span> <span class="o">&gt;</span> <span class="n">number</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">guess</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot; is too high.</span><span class="se">\n</span><span class="s">&quot;</span>
    <span class="k">elif</span> <span class="n">guess</span> <span class="o">&lt;</span> <span class="n">number</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">guess</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot; is too low.</span><span class="se">\n</span><span class="s">&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">break</span>

<span class="nb">input</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Great, you got it in {0} guesses!</span><span class="se">\n\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">guesses</span><span class="p">))</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>This program makes use of the mathematical law of <strong>trichotomy</strong> (given real
numbers a and b, exactly one of these three must be true:  a &gt; b, a &lt; b, or a == b).</p>
<p>At line 18 there is a call to the input function, but we don&#8217;t do
anything with the result, not even assign it to a variable.  This is legal in Python.
Here it has the effect of popping up the input dialog window and waiting for the
user to respond before the program terminates.  Programmers often use the trick
of doing some extra input at the end of a script, just to keep the window open.</p>
<p>Also notice the use of the <tt class="docutils literal"><span class="pre">msg</span></tt> variable, initially an empty string, on lines 6, 12 and 14.
Each time through the loop we extend the message being displayed: this allows us to
display the program&#8217;s feedback right at the same place as we&#8217;re asking for the next guess.</p>
<blockquote>
<div><img alt="_images/python_input.png" src="_images/python_input.png" />
</div></blockquote>
</div>
<div class="section" id="the-continue-statement">
<span id="index-14"></span><h2>7.18. The <tt class="docutils literal"><span class="pre">continue</span></tt> statement<a class="headerlink" href="#the-continue-statement" title="Permalink to this headline">¶</a></h2>
<p>This is a control flow statement that causes the program to immediately skip the
processing of the rest of the body of the loop, <em>for the current iteration</em>.  But
the loop still carries on running for its remaining iterations:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">30</span><span class="p">]:</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>      <span class="c"># If the number is odd</span>
       <span class="k">continue</span>         <span class="c"># Don&#39;t process it</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s">&quot;done&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>This prints:</p>
<blockquote>
<div><div class="highlight-pycon"><div class="highlight"><pre><span class="go">12</span>
<span class="go">16</span>
<span class="go">24</span>
<span class="go">30</span>
<span class="go">done</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="more-generalization">
<h2>7.19. More generalization<a class="headerlink" href="#more-generalization" title="Permalink to this headline">¶</a></h2>
<p>As another example of generalization, imagine you wanted a program that would
print a multiplication table of any size, not just the six-by-six table. You
could add a parameter to <tt class="docutils literal"><span class="pre">print_mult_table</span></tt>:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">print_mult_table</span><span class="p">(</span><span class="n">high</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">print_multiples</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>We replaced the value 7 with the expression <tt class="docutils literal"><span class="pre">high+1</span></tt>. If we call
<tt class="docutils literal"><span class="pre">print_mult_table</span></tt> with the argument 7, it displays:</p>
<blockquote>
<div><div class="highlight-pycon"><div class="highlight"><pre><span class="go">1      2      3      4      5      6</span>
<span class="go">2      4      6      8      10     12</span>
<span class="go">3      6      9      12     15     18</span>
<span class="go">4      8      12     16     20     24</span>
<span class="go">5      10     15     20     25     30</span>
<span class="go">6      12     18     24     30     36</span>
<span class="go">7      14     21     28     35     42</span>
</pre></div>
</div>
</div></blockquote>
<p>This is fine, except that we probably want the table to be square &#8212; with the
same number of rows and columns. To do that, we add another parameter to
<tt class="docutils literal"><span class="pre">print_multiples</span></tt> to specify how many columns the table should have.</p>
<p>Just to be annoying, we call this parameter <tt class="docutils literal"><span class="pre">high</span></tt>, demonstrating that
different functions can have parameters with the same name (just like local
variables). Here&#8217;s the whole program:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">print_multiples</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">high</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">n</span> <span class="o">*</span> <span class="n">i</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">&quot;   &quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">print_mult_table</span><span class="p">(</span><span class="n">high</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">print_multiples</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">high</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>Notice that when we added a new parameter, we had to change the first line of
the function (the function heading), and we also had to change the place where
the function is called in <tt class="docutils literal"><span class="pre">print_mult_table</span></tt>.</p>
<p>Now, when we call <tt class="docutils literal"><span class="pre">print_mult_table(7)</span></tt>:</p>
<blockquote>
<div><div class="highlight-pycon"><div class="highlight"><pre><span class="go">1      2      3      4      5      6      7</span>
<span class="go">2      4      6      8      10     12     14</span>
<span class="go">3      6      9      12     15     18     21</span>
<span class="go">4      8      12     16     20     24     28</span>
<span class="go">5      10     15     20     25     30     35</span>
<span class="go">6      12     18     24     30     36     42</span>
<span class="go">7      14     21     28     35     42     49</span>
</pre></div>
</div>
</div></blockquote>
<p>When you generalize a function appropriately, you often get a program with
capabilities you didn&#8217;t plan. For example, you might notice that, because ab =
ba, all the entries in the table appear twice. You could save ink by printing
only half the table. To do that, you only have to change one line of
<tt class="docutils literal"><span class="pre">print_mult_table</span></tt>. Change</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">print_multiples</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">high</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>to</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">print_multiples</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>and you get:</p>
<div class="highlight-python"><pre>1
2      4
3      6      9
4      8      12     16
5      10     15     20     25
6      12     18     24     30     36
7      14     21     28     35     42     49</pre>
</div>
</div>
<div class="section" id="functions">
<span id="index-15"></span><h2>7.20. Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<p>A few times now, we have mentioned all the things functions are good for. By
now, you might be wondering what exactly those things are.  Here are some of
them:</p>
<ol class="arabic simple">
<li>Capturing your mental chunking. Breaking your complex tasks into sub-tasks, and
giving the sub-tasks a meaningful name is a powerful mental technique.  Look back
at the example that illustrated the post-test loop: we assumed that we had a function
called <tt class="docutils literal"><span class="pre">play_the_game_once</span></tt>.  This chunking allowed us to put aside the details
of the particular game &#8212; is it a card game, or noughts and crosses, or a role playing
game &#8212; and simply focus on one isolated part of our program logic &#8212; letting the player
choose whether they want to play again.</li>
<li>Dividing a long program into functions allows you to separate parts of the
program, debug them in isolation, and then compose them into a whole.</li>
<li>Functions facilitate the use of iteration.</li>
<li>Well-designed functions are often useful for many programs. Once you write
and debug one, you can reuse it.</li>
</ol>
</div>
<div class="section" id="paired-data">
<h2>7.21. Paired Data<a class="headerlink" href="#paired-data" title="Permalink to this headline">¶</a></h2>
<p>We&#8217;ve already seen lists of names and lists of numbers in Python. We&#8217;re going to peek ahead in
the textbook a little, and show a more advanced way of representing our data.
Making a pair of things in Python is as simple as putting them into parentheses,
like this:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">year_born</span> <span class="o">=</span> <span class="p">(</span><span class="s">&quot;Paris Hilton&quot;</span><span class="p">,</span> <span class="mi">1981</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>We can put many pairs into a list of pairs:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">celebs</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&quot;Brad Pitt&quot;</span><span class="p">,</span> <span class="mi">1963</span><span class="p">),</span> <span class="p">(</span><span class="s">&quot;Jack Nicholson&quot;</span><span class="p">,</span> <span class="mi">1937</span><span class="p">),</span>
                                <span class="p">(</span><span class="s">&quot;Justin Bieber&quot;</span><span class="p">,</span> <span class="mi">1994</span><span class="p">)]</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>Here is a quick sample of things we can do with structured data like this.  First,
print all the celebs:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="nb">print</span><span class="p">(</span><span class="n">celebs</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">celebs</span><span class="p">))</span>
</pre></div>
</td></tr></table></div>
<div class="highlight-pycon"><div class="highlight"><pre><span class="go">[(&quot;Brad Pitt&quot;, 1963), (&quot;Jack Nicholson&quot;, 1937), (&quot;Justin Bieber&quot;, 1994)]</span>
<span class="go">3</span>
</pre></div>
</div>
</div></blockquote>
<p>Notice that the <tt class="docutils literal"><span class="pre">celebs</span></tt> list has just 3 elements, each of them pairs.</p>
<p>Now we print the names of those celebrities born before 1980:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">for</span> <span class="p">(</span><span class="n">nm</span><span class="p">,</span> <span class="n">yr</span><span class="p">)</span> <span class="ow">in</span> <span class="n">celebs</span><span class="p">:</span>
   <span class="k">if</span> <span class="n">yr</span> <span class="o">&lt;</span> <span class="mi">1980</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">nm</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<div class="highlight-pycon"><div class="highlight"><pre><span class="go">Brad Pitt</span>
<span class="go">Jack Nicholson</span>
</pre></div>
</div>
</div></blockquote>
<p>This demonstrates something we have not seen yet in the <tt class="docutils literal"><span class="pre">for</span></tt> loop: instead of using a single
loop control variable, we&#8217;ve used a pair of variable names, <tt class="docutils literal"><span class="pre">(nm,</span> <span class="pre">yr)</span></tt>,  instead.
The loop is executed three times &#8212; once for each pair in the list, and on each iteration both the
variables are assigned values from the pair of data that is being handled.</p>
</div>
<div class="section" id="nested-loops-for-nested-data">
<span id="nested-data"></span><h2>7.22. Nested Loops for Nested Data<a class="headerlink" href="#nested-loops-for-nested-data" title="Permalink to this headline">¶</a></h2>
<p>Now we&#8217;ll come up with an even more adventurous list of structured data.  In this case,
we have a list of students.  Each student has a name which is paired up with another list
of subjects that they are enrolled for:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">students</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s">&quot;John&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;CompSci&quot;</span><span class="p">,</span> <span class="s">&quot;Physics&quot;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s">&quot;Vusi&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;Maths&quot;</span><span class="p">,</span> <span class="s">&quot;CompSci&quot;</span><span class="p">,</span> <span class="s">&quot;Stats&quot;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s">&quot;Jess&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;CompSci&quot;</span><span class="p">,</span> <span class="s">&quot;Accounting&quot;</span><span class="p">,</span> <span class="s">&quot;Economics&quot;</span><span class="p">,</span> <span class="s">&quot;Management&quot;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s">&quot;Sarah&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;InfSys&quot;</span><span class="p">,</span> <span class="s">&quot;Accounting&quot;</span><span class="p">,</span> <span class="s">&quot;Economics&quot;</span><span class="p">,</span> <span class="s">&quot;CommLaw&quot;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s">&quot;Zuki&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;Sociology&quot;</span><span class="p">,</span> <span class="s">&quot;Economics&quot;</span><span class="p">,</span> <span class="s">&quot;Law&quot;</span><span class="p">,</span> <span class="s">&quot;Stats&quot;</span><span class="p">,</span> <span class="s">&quot;Music&quot;</span><span class="p">])]</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>Here we&#8217;ve assigned a list of five elements to the variable <tt class="docutils literal"><span class="pre">students</span></tt>.  Let&#8217;s print
out each student name, and the number of subjects they are enrolled for:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="c"># Print all students with a count of their courses.</span>
<span class="k">for</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">subjects</span><span class="p">)</span> <span class="ow">in</span> <span class="n">students</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s">&quot;takes&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">subjects</span><span class="p">),</span> <span class="s">&quot;courses&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>Python agreeably responds with the following output:</p>
<blockquote>
<div><div class="highlight-pycon"><div class="highlight"><pre><span class="go">John takes 2 courses</span>
<span class="go">Vusi takes 3 courses</span>
<span class="go">Jess takes 4 courses</span>
<span class="go">Sarah takes 4 courses</span>
<span class="go">Zuki takes 5 courses</span>
</pre></div>
</div>
</div></blockquote>
<p>Now we&#8217;d like to ask how many students are taking CompSci. This needs a counter,
and for each student we need a second loop that tests each of the subjects in turn:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span class="c"># Count how many students are taking CompSci</span>
<span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">subjects</span><span class="p">)</span> <span class="ow">in</span> <span class="n">students</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">subjects</span><span class="p">:</span>                 <span class="c"># A nested loop!</span>
        <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="s">&quot;CompSci&quot;</span><span class="p">:</span>
           <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="nb">print</span><span class="p">(</span><span class="s">&quot;The number of students taking CompSci is&quot;</span><span class="p">,</span> <span class="n">counter</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<div class="highlight-pycon"><div class="highlight"><pre><span class="go">The number of students taking CompSci is 3</span>
</pre></div>
</div>
</div></blockquote>
<p>You should set up a list of your own data that interests you  &#8212;
perhaps a list of your CDs, each containing a list of song titles on the CD,
or a list of movie titles, each with a list of movie stars who acted in the movie.
You could then ask questions like &#8220;Which movies starred Angelina Jolie?&#8221;</p>
</div>
<div class="section" id="newton-s-method-for-finding-square-roots">
<span id="index-16"></span><h2>7.23. Newton&#8217;s method for finding square roots<a class="headerlink" href="#newton-s-method-for-finding-square-roots" title="Permalink to this headline">¶</a></h2>
<p>Loops are often used in programs that compute numerical results by starting
with an approximate answer and iteratively improving it.</p>
<p>For example, before we had calculators or computers, people needed to
calculate square roots manually.  Newton used a particularly good
method (there is some evidence that this method was known many years before).
Suppose that you want to know the square root of <tt class="docutils literal"><span class="pre">n</span></tt>. If you start
with almost any approximation, you can compute a better approximation (closer
to the actual answer) with the following formula:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">better</span> <span class="o">=</span> <span class="p">(</span><span class="n">approx</span> <span class="o">+</span> <span class="n">n</span><span class="o">/</span><span class="n">approx</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>Repeat this calculation a few times using your calculator.  Can you
see why each iteration brings your estimate a little closer?  One of the amazing
properties of this particular algorithm is how quickly it converges to an accurate
answer &#8212; a great advantage for doing it manually.</p>
<p>By using a loop and repeating this formula until the better approximation gets close
enough to the previous one, we can write a function for computing the square root.
(In fact, this is how your calculator finds square roots &#8212; it may have a slightly
different formula and method, but it is also based on repeatedly improving its
guesses.)</p>
<p>This is an example of an <cite>indefinite</cite> iteration problem: we cannot predict in advance
how many times we&#8217;ll want to improve our guess &#8212; we just want to keep getting closer
and closer.  Our stopping condition for the loop will be when our old guess and our
improved guess are &#8220;close enough&#8221; to each other.</p>
<p>Ideally, we&#8217;d like the old and new guess to be exactly equal to each other when we stop.
But exact equality is a tricky notion in computer arithmetic when real numbers are involved.
Because real numbers are not represented absolutely accurately (after all, a number like pi or the
square root of two has an infinite number of decimal places because it is irrational), we
need to formulate the stopping test for the loop by asking &#8220;is <cite>a</cite> close enough to <cite>b</cite>&#8221;?
This stopping condition can be coded like this:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">a</span><span class="o">-</span><span class="n">b</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.001</span><span class="p">:</span>  <span class="c"># Make this smaller for better accuracy</span>
      <span class="k">break</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>Notice that we take the absolute value of the difference between <tt class="docutils literal"><span class="pre">a</span></tt> and <tt class="docutils literal"><span class="pre">b</span></tt>!</p>
<p>This problem is also a good example of when a middle-exit loop is appropriate:</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">approx</span> <span class="o">=</span> <span class="n">n</span><span class="o">/</span><span class="mf">2.0</span>     <span class="c"># Start with some or other guess at the answer</span>
    <span class="k">while</span> <span class="k">True</span><span class="p">:</span>
        <span class="n">better</span> <span class="o">=</span> <span class="p">(</span><span class="n">approx</span> <span class="o">+</span> <span class="n">n</span><span class="o">/</span><span class="n">approx</span><span class="p">)</span><span class="o">/</span><span class="mf">2.0</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">approx</span> <span class="o">-</span> <span class="n">better</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.001</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">better</span>
        <span class="n">approx</span> <span class="o">=</span> <span class="n">better</span>

<span class="c"># Test cases</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">25.0</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">49.0</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">81.0</span><span class="p">))</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>The output is:</p>
<blockquote>
<div><div class="highlight-pycon"><div class="highlight"><pre><span class="go">5.00000000002</span>
<span class="go">7.0</span>
<span class="go">9.0</span>
</pre></div>
</div>
</div></blockquote>
<p>See if you can improve the approximations by changing the stopping condition.  Also,
step through the algorithm (perhaps by hand, using your calculator) to see how many
iterations were needed before it achieved this level of accuracy for <tt class="docutils literal"><span class="pre">sqrt(25)</span></tt>.</p>
</div>
<div class="section" id="algorithms">
<span id="index-17"></span><h2>7.24. Algorithms<a class="headerlink" href="#algorithms" title="Permalink to this headline">¶</a></h2>
<p>Newton&#8217;s method is an example of an <strong>algorithm</strong>: it is a mechanical process
for solving a category of problems (in this case, computing square roots).</p>
<p>Some kinds of knowledge are not algorithmic.  For example, learning dates
from history or your multiplication tables involves memorization of specific
solutions.</p>
<p>But the techniques you learned for addition with carrying, subtraction
with borrowing, and long division are all algorithms. Or if you are an avid Sudoku
puzzle solver, you might have some specific set of steps that you always follow.</p>
<p>One of the characteristics of algorithms is that they do not require any intelligence to
carry out. They are mechanical processes in which each step follows from the
last according to a simple set of rules.  And they&#8217;re designed to solve a
general class or category of problems, not just a single problem.</p>
<p>Understanding that hard problems can be solved by step-by-step
algorithmic processes (and having technology to execute these algorithms for us)
is one of the major breakthroughs that has had enormous benefits.  So while
the execution of the algorithm
may be boring and may require no intelligence, algorithmic or computational
thinking &#8212; i.e. using algorithms and automation as the basis for approaching problems &#8212;
is rapidly transforming our society.  Some claim that this shift towards algorithmic thinking
and processes is going to have even more impact on our society than the
invention of the printing press.
And the process of designing algorithms is interesting,
intellectually challenging, and a central part of what we call programming.</p>
<p>Some of the things that people do naturally, without difficulty or conscious
thought, are the hardest to express algorithmically.  Understanding natural
language is a good example. We all do it, but so far no one has been able to
explain <em>how</em> we do it, at least not in the form of a step-by-step mechanical
algorithm.</p>
</div>
<div class="section" id="glossary">
<h2>7.25. Glossary<a class="headerlink" href="#glossary" title="Permalink to this headline">¶</a></h2>
<dl class="glossary docutils">
<dt id="term-algorithm">algorithm</dt>
<dd>A step-by-step process for solving a category of problems.</dd>
<dt id="term-body">body</dt>
<dd>The statements inside a loop.</dd>
<dt id="term-breakpoint">breakpoint</dt>
<dd>A place in your program code where program execution will pause (or break),
allowing you to inspect the state of the program&#8217;s variables, or single-step
through individual statements, executing them one at a time.</dd>
<dt id="term-bump">bump</dt>
<dd>Programmer slang. Synonym for increment.</dd>
<dt id="term-continue-statement">continue statement</dt>
<dd>A statement that causes the remainder of the current iteration of a loop to be skipped.
The flow of execution goes back to the top of the loop, evaluates the condition,
and if this is true the next iteration of the loop will begin.</dd>
<dt id="term-counter">counter</dt>
<dd>A variable used to count something, usually initialized to zero and
incremented in the body of a loop.</dd>
<dt id="term-cursor">cursor</dt>
<dd>An invisible marker that keeps track of where the next character will
be printed.</dd>
<dt id="term-decrement">decrement</dt>
<dd>Decrease by 1.</dd>
<dt id="term-definite-iteration">definite iteration</dt>
<dd>A loop where we have an upper bound on the number of times the
body will be executed.  Definite iteration is usually best coded
as a <tt class="docutils literal"><span class="pre">for</span></tt> loop.</dd>
<dt id="term-development-plan">development plan</dt>
<dd>A process for developing a program. In this chapter, we demonstrated a
style of development based on developing code to do simple, specific
things and then encapsulating and generalizing.</dd>
<dt id="term-encapsulate">encapsulate</dt>
<dd>To divide a large complex program into components (like functions) and
isolate the components from each other (by using local variables, for
example).</dd>
<dt id="term-escape-sequence">escape sequence</dt>
<dd>An escape character, \, followed by one or more printable characters
used to designate a nonprintable character.</dd>
<dt id="term-generalize">generalize</dt>
<dd>To replace something unnecessarily specific (like a constant value)
with something appropriately general (like a variable or parameter).
Generalization makes code more versatile, more likely to be reused, and
sometimes even easier to write.</dd>
<dt id="term-increment">increment</dt>
<dd>Both as a noun and as a verb, increment means to increase by 1.</dd>
<dt id="term-infinite-loop">infinite loop</dt>
<dd>A loop in which the terminating condition is never satisfied.</dd>
<dt id="term-indefinite-iteration">indefinite iteration</dt>
<dd>A loop where we just need to keep going until some condition is met.
A <tt class="docutils literal"><span class="pre">while</span></tt> statement is used for this case.</dd>
<dt id="term-initialization-of-a-variable">initialization (of a variable)</dt>
<dd>To initialize a variable is to give it an initial value.
Since in Python variables don&#8217;t exist
until they are assigned values, they are initialized when they are
created.  In other programming languages this is not the case, and
variables can be created without being initialized, in which case they
have either default or <em>garbage</em> values.</dd>
<dt id="term-iteration">iteration</dt>
<dd>Repeated execution of a set of programming statements.</dd>
<dt id="term-loop">loop</dt>
<dd>The construct that allows allows us to repeatedly execute a
statement or a group of statements until a terminating
condition is satisfied.</dd>
<dt id="term-loop-variable">loop variable</dt>
<dd>A variable used as part of the terminating condition of a loop.</dd>
<dt id="term-meta-notation">meta-notation</dt>
<dd>Extra symbols or notation that helps describe other notation. Here we introduced
square brackets, ellipses, italics, and bold as meta-notation to help
describe optional, repeatable, substitutable and fixed parts of the Python syntax.</dd>
<dt id="term-middle-test-loop">middle-test loop</dt>
<dd>A loop that executes some of the body, then tests for the exit condition,
and then may execute some more of the body.  We don&#8217;t have a special
Python construct for this case, but can
use <tt class="docutils literal"><span class="pre">while</span></tt> and <tt class="docutils literal"><span class="pre">break</span></tt> together.</dd>
<dt id="term-nested-loop">nested loop</dt>
<dd>A loop inside the body of another loop.</dd>
<dt id="term-newline">newline</dt>
<dd>A special character that causes the cursor to move to the beginning of
the next line.</dd>
<dt id="term-post-test-loop">post-test loop</dt>
<dd>A loop that executes the body, then tests for the exit condition.  We don&#8217;t have a special
Python construct for this, but can use <tt class="docutils literal"><span class="pre">while</span></tt> and <tt class="docutils literal"><span class="pre">break</span></tt> together.</dd>
<dt id="term-pre-test-loop">pre-test loop</dt>
<dd>A loop that tests before deciding whether the execute its body.  <tt class="docutils literal"><span class="pre">for</span></tt> and <tt class="docutils literal"><span class="pre">while</span></tt>
are both pre-test loops.</dd>
<dt id="term-single-step">single-step</dt>
<dd>A mode of interpreter execution where you are able to execute your
program one step at a time, and inspect the consequences of that step.
Useful for debugging and building your internal mental model of what is
going on.</dd>
<dt id="term-tab">tab</dt>
<dd>A special character that causes the cursor to move to the next tab stop
on the current line.</dd>
<dt id="term-trichotomy">trichotomy</dt>
<dd>Given any real numbers <em>a</em> and <em>b</em>, exactly one of the following
relations holds: <em>a &lt; b</em>, <em>a &gt; b</em>, or <em>a == b</em>. Thus when you can
establish that two of the relations are false, you can assume the
remaining one is true.</dd>
<dt id="term-trace">trace</dt>
<dd>To follow the flow of execution of a program by hand, recording the
change of state of the variables and any output produced.</dd>
</dl>
</div>
<div class="section" id="exercises">
<h2>7.26. Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h2>
<p>This chapter showed us how to sum a list of items,
and how to count items.  The counting example also had an <tt class="docutils literal"><span class="pre">if</span></tt> statement
that let us only count some selected items.  In the previous
chapter we also showed a function <tt class="docutils literal"><span class="pre">find_first_2_letter_word</span></tt> that allowed
us an &#8220;early exit&#8221; from inside a loop by using <tt class="docutils literal"><span class="pre">return</span></tt> when some condition occurred.
We now also have <tt class="docutils literal"><span class="pre">break</span></tt> to exit a loop (but not the enclosing function, and
<tt class="docutils literal"><span class="pre">continue</span></tt> to abandon the current iteration of the loop without ending the loop.</p>
<p>Composition of list traversal, summing, counting, testing conditions
and early exit is a rich collection of building blocks that can be combined
in powerful ways to create many functions that are all slightly different.</p>
<p>The first six questions are typical functions you should be able to write using only
these building blocks.</p>
<ol class="arabic">
<li><p class="first">Write a function to count how many odd numbers are in a list.</p>
</li>
<li><p class="first">Sum up all the even numbers in a list.</p>
</li>
<li><p class="first">Sum up all the negative numbers in a list.</p>
</li>
<li><p class="first">Count how many words in a list have length 5.</p>
</li>
<li><p class="first">Sum all the elements in a list up to but not including the first even number.
(Write your unit tests.  What if there is no even number?)</p>
</li>
<li><p class="first">Count how many words occur in a list up to and including the first occurrence of the word &#8220;sam&#8221;.
(Write your unit tests for this case too.  What if &#8220;sam&#8221; does not occur?)</p>
</li>
<li><p class="first">Add a print function to Newton&#8217;s <tt class="docutils literal"><span class="pre">sqrt</span></tt> function that
prints out <tt class="docutils literal"><span class="pre">better</span></tt> each time it is calculated. Call your modified
function with 25 as an argument and record the results.</p>
</li>
<li><p class="first">Trace the execution of the last version of <tt class="docutils literal"><span class="pre">print_mult_table</span></tt> and figure
out how it works.</p>
</li>
<li><p class="first">Write a function <tt class="docutils literal"><span class="pre">print_triangular_numbers(n)</span></tt> that prints out the first
n triangular numbers. A call to <tt class="docutils literal"><span class="pre">print_triangular_numbers(5)</span></tt> would
produce the following output:</p>
<div class="highlight-python"><pre>1       1
2       3
3       6
4       10
5       15</pre>
</div>
<p>(<em>hint: use a web search to find out what a triangular number is.</em>)</p>
</li>
<li><p class="first">Write a function, <tt class="docutils literal"><span class="pre">is_prime</span></tt>, which takes a single integer argument
and returns <tt class="docutils literal"><span class="pre">True</span></tt> when the argument is a <em>prime number</em> and <tt class="docutils literal"><span class="pre">False</span></tt>
otherwise. Add tests for cases like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">test</span><span class="p">(</span><span class="n">is_prime</span><span class="p">(</span><span class="mi">11</span><span class="p">),</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">test</span><span class="p">(</span><span class="n">is_prime</span><span class="p">(</span><span class="mi">35</span><span class="p">),</span> <span class="bp">False</span><span class="p">)</span>
<span class="n">test</span><span class="p">(</span><span class="n">is_prime</span><span class="p">(</span><span class="mi">19911121</span><span class="p">),</span> <span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>The last case could represent your birth date.  Were you born on a prime day?
In a class of 100 students, how many do you think would have prime birth dates?</p>
</li>
<li><p class="first">Revisit the drunk pirate problem from the exercises in chapter 3.
This time, the drunk pirate makes a turn, and then takes some steps forward, and repeats this.
Our social science student now records <cite>pairs</cite> of data: the angle of each turn, and the number
of steps taken after the turn.  Her experimental data is
[(160, 20), (-43, 10), (270, 8), (-43, 12)].  Use a turtle to draw the path taken by our drunk friend.</p>
</li>
<li><p class="first">Many interesting shapes can be drawn by the turtle by giving a list of pairs like we did
above, where the first item of the pair is the angle to turn, and the second item is
the distance to move forward.  Set up a list of pairs so that the turtle draws a
house with a cross through the centre, as show here.
This should be done without going over any of the lines / edges more than once,
and without lifting your pen.</p>
<img alt="_images/tess_house.png" src="_images/tess_house.png" />
</li>
<li><p class="first">Not all shapes like the one above can be drawn without lifting your pen, or going over
an edge more than once.  Which of these can be drawn?</p>
<img alt="_images/tess_more_houses.png" src="_images/tess_more_houses.png" />
<p>Now read Wikipedia&#8217;s article(<a class="reference external" href="http://en.wikipedia.org/wiki/Eulerian_path">http://en.wikipedia.org/wiki/Eulerian_path</a>) about Eulerian paths.
Learn how to tell immediately by inspection whether it is possible to find a solution or not.
If the path is possible, you&#8217;ll also know where to put your pen to start drawing, and where
you should end up!</p>
</li>
<li><p class="first">What will <tt class="docutils literal"><span class="pre">num_digits(0)</span></tt> return? Modify it to return <tt class="docutils literal"><span class="pre">1</span></tt> for this
case. Why does a call to <tt class="docutils literal"><span class="pre">num_digits(-24)</span></tt> result in an infinite loop?
(<em>hint: -1//10 evaluates to -1</em>)  Modify <tt class="docutils literal"><span class="pre">num_digits</span></tt> so that it works
correctly with any integer value. Add these tests:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">test</span><span class="p">(</span><span class="n">num_digits</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">test</span><span class="p">(</span><span class="n">num_digits</span><span class="p">(</span><span class="o">-</span><span class="mi">12345</span><span class="p">),</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Write a function <tt class="docutils literal"><span class="pre">num_even_digits(n)</span></tt> that counts the number
of even digits in <tt class="docutils literal"><span class="pre">n</span></tt>.  These tests should pass:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">test</span><span class="p">(</span><span class="n">num_even_digits</span><span class="p">(</span><span class="mi">123456</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">test</span><span class="p">(</span><span class="n">num_even_digits</span><span class="p">(</span><span class="mi">2468</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">test</span><span class="p">(</span><span class="n">num_even_digits</span><span class="p">(</span><span class="mi">1357</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">test</span><span class="p">(</span><span class="n">num_even_digits</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Write a function <tt class="docutils literal"><span class="pre">sum_of_squares(xs)</span></tt> that computes the sum
of the squares of the numbers in the list <tt class="docutils literal"><span class="pre">xs</span></tt>.  For example,
<tt class="docutils literal"><span class="pre">sum_of_squares([2,</span> <span class="pre">3,</span> <span class="pre">4])</span></tt> should return 4+9+16 which is 29:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">test</span><span class="p">(</span><span class="n">sum_of_squares</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]),</span> <span class="mi">29</span><span class="p">)</span>
<span class="n">test</span><span class="p">(</span><span class="n">sum_of_squares</span><span class="p">([</span> <span class="p">]),</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">test</span><span class="p">(</span><span class="n">sum_of_squares</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]),</span> <span class="mi">29</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">You and your friend are in a team to write a two-player game,
human against computer, such as Tic-Tac-Toe / Noughts and Crosses.
Your friend will write the logic to play one round of the game, while you will
write the logic to allow many rounds of play, keep score, decide who
plays, first, etc.  The two of you negotiate on how the two parts of the
program will fit together, and you come up with this simple
scaffolding (which your friend will improve later):</p>
<blockquote>
<div><div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span class="c"># Your friend will complete this function</span>
<span class="k">def</span> <span class="nf">play_once</span><span class="p">(</span><span class="n">human_plays_first</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       Must play one round of the game. If the parameter</span>
<span class="sd">       is True, the human gets to play first, else the</span>
<span class="sd">       computer gets to play first.  When the round ends,</span>
<span class="sd">       the return value of the function is one of</span>
<span class="sd">       -1 (human wins),  0 (game drawn),   1 (computer wins).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># This is all dummy scaffolding code right at the moment...</span>
    <span class="kn">import</span> <span class="nn">random</span>                  <span class="c"># See Modules chapter ...</span>
    <span class="n">rng</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">Random</span><span class="p">()</span>
    <span class="c"># Pick a random result between -1 and 1.</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s">&quot;Human plays first={0},  winner={1} &quot;</span>
                       <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">human_plays_first</span><span class="p">,</span> <span class="n">result</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<ol class="loweralpha simple">
<li>Write the main program which repeatedly calls this function to play
the game, and after each round it announces the outcome as &#8220;I win!&#8221;, &#8220;You win!&#8221;, or &#8220;Game drawn!&#8221;.
It then asks the player &#8220;Do you want to play again?&#8221; and either plays again,
or says &#8220;Goodbye&#8221;, and terminates.</li>
<li>Keep score of how many wins each player has had, and how many draws there have been.
After each round of play, also announce the scores.</li>
<li>Add logic so that the players take turns to play first.</li>
<li>Compute the percentage of wins for the human, out of all games played.  Also announce this
at the end of each round.</li>
<li>Draw a flowchart of your logic.</li>
</ol>
</li>
</ol>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="strings.html" title="8. Strings"
             >next</a> |</li>
        <li class="right" >
          <a href="fruitful_functions.html" title="6. Fruitful functions"
             >previous</a> |</li>
        <li><a href="index.html">How to Think Like a Computer Scientist: Learning with Python 3</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Peter Wentworth, Jeffrey Elkner, Allen B. Downey and Chris Meyers.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>